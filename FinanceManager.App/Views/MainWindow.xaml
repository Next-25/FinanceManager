<Window x:Class="FinanceManager.App.Views.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:vm="clr-namespace:FinanceManager.App.ViewModels"
        Title="Финансовый менеджер" Height="600" Width="900"
        WindowStartupLocation="CenterScreen"
        Icon="/Images/Icon.png">
    <Window.DataContext>
        <vm:MainViewModel/>
    </Window.DataContext>

    <DockPanel>
        <StackPanel DockPanel.Dock="Top" Orientation="Horizontal" Margin="10" VerticalAlignment="Center" >
            <TextBlock Text="С:" Margin="0,0,6,0" VerticalAlignment="Center"/>
            <DatePicker SelectedDate="{Binding From, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}" Width="140" Margin="0,0,10,0"/>
            <TextBlock Text="По:" Margin="0,0,6,0" VerticalAlignment="Center"/>
            <DatePicker SelectedDate="{Binding To, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}" Width="140" Margin="0,0,10,0"/>
            <Button Content="Сбросить фильтр" Command="{Binding ClearFilterCommand}" Margin="0,0,20,0"/>
        </StackPanel>

        <StackPanel DockPanel.Dock="Top" Orientation="Horizontal" Margin="10" HorizontalAlignment="Center">
            <TextBlock Text="{Binding IncomeSum, StringFormat=Поступления всего: {0:C}, ConverterCulture=ru-RU}" 
               FontWeight="Bold" Margin="0,0,20,0"/>
            <TextBlock Text="{Binding ExpenseSum, StringFormat=Расход всего: {0:C}, ConverterCulture=ru-RU}" 
               FontWeight="Bold" Margin="0,0,20,0"/>
            <TextBlock Text="{Binding Balance, StringFormat=Остаток: {0:C}, ConverterCulture=ru-RU}" 
               FontWeight="Bold"/>
        </StackPanel>

        <ToolBar DockPanel.Dock="Top" Margin="10,0,10,5">
            <Button Content="Поступления" Command="{Binding AddIncomeCommand}" />
            <Button Content="Расход" Command="{Binding AddExpenseCommand}" Margin="6,0,0,0"/>
            <Button Content="Изменить" Command="{Binding EditCommand}" Margin="6,0,0,0"/>
            <Button Content="Удалить" Command="{Binding DeleteCommand}" Margin="6,0,0,0"/>
        </ToolBar>

        <DataGrid ItemsSource="{Binding Transactions}" SelectedItem="{Binding Selected}"
                  AutoGenerateColumns="False" Margin="10" IsReadOnly="True" MouseDoubleClick="DataGrid_MouseDoubleClick">
            <DataGrid.Columns>
                <DataGridTextColumn Header="Дата" Binding="{Binding Date, StringFormat={}{0:dd.MM.yyyy}}" Width="120"/>
                <DataGridTextColumn Header="Тип" Binding="{Binding Type}" Width="100"/>
                <DataGridTextColumn Header="Категория" Binding="{Binding Category}" Width="150"/>
                <DataGridTextColumn Header="Сумма" Binding="{Binding Amount, StringFormat={}{0:C}, ConverterCulture=ru-RU}" Width="120"/>
                <DataGridTextColumn Header="Описание" Binding="{Binding Description}" Width="*"/>
            </DataGrid.Columns>
        </DataGrid>
    </DockPanel>
</Window>
